<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <style>
            * {
                margin: 0;
                box-sizing: border-box;
            }
            html,
            body {
                height: 100vh;
                background-color: #333;
            }
            main {
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
            }
            .container-canvas {
                border: 1px solid #fff;
                width: 640px;
                height: 360px;
                /* width: 1280px;
                height: 720px; */
                outline: none;
                transform: scale(2);
            }
            canvas {
                image-rendering: pixelated !important;
            }
        </style>
    </head>
    <body>
        <main>
            <div class="container-canvas">
                <canvas width="640" height="360" id="myCanvas"></canvas>
                <!-- <canvas width="1280" height="720" id="myCanvas"></canvas> -->
            </div>
        </main>
        <script src="Dependencias/auxiliares.js"></script>
        <script src="Dependencias/classes/AssetsController.js"></script>
        <script src="Dependencias/classes/Game.js"></script>
        <script src="Dependencias/classes/InputController.js"></script>
        <script src="Dependencias/classes/Sprite.js"></script>
        <script src="Dependencias/classes/SpriteAnimator.js"></script>
        <script src="Dependencias/classes/GameObject.js"></script>
        <script src="Dependencias/classes/Map/MapObject.js"></script>
        <script src="Dependencias/classes/LocalElements.js"></script>
        <script src="Dependencias/classes/RigidBody.js"></script>
        <script src="Dependencias/classes/Particles.js"></script>
        <script src="Dependencias/classes/ParticlesAnimation.js"></script>
        <script src="Dependencias/classes/Projetil.js"></script>
        <script src="Dependencias/classes/FrameController.js"></script>
        <script src="Dependencias/classes/Map/worldMap.js"></script>
        <script src="Dependencias/classes/Map/mapController.js"></script>
        <script src="Dependencias/classes/Map/MapObjectListener.js"></script>
        <script src="Dependencias/classes/Map/Entitys/RPGPerson.js"></script>
        <script src="Dependencias/classes/Map/Entitys/Enemy.js"></script>
        <script src="Dependencias/classes/Map/Entitys/Hero.js"></script>
        <script>
            //XP CALC
            // let levelTeste = 50;
            // let a = Math.round(
            //     ((50 * levelTeste + 1) * (levelTeste + 1) * (levelTeste + 1) -
            //         150 * (levelTeste + 1) * (levelTeste + 1) +
            //         400 * (levelTeste + 1)) /
            //         3
            // );

            const game = new Game(document.getElementById("myCanvas"));
            var debug_collider = false;
            const initFunction = async () => {
                window.worldmap = new Map({ spriteName: "worldmap" });
                window.obj = new Hero({
                    name: "Michel Vieira",
                    xOnMap: -15,
                    yOnMap: -31,
                    velocity: 1,
                    spriteName: "teste",
                    spriteType: "sheet",
                    lines: 4,
                    cols: 6,
                    rigid: true,
                    animations: {
                        idle: { frames: [[1, 0]] },
                        especial: {
                            ms: 50,
                            frames: [
                                [0, 0],
                                [1, 0],
                                [2, 0],
                                [3, 0],
                            ],
                        },
                        right: {
                            ms: 100,
                            frames: [
                                [0, 2],
                                [1, 2],
                                [2, 2],
                                [3, 2],
                                [4, 2],
                            ],
                        },
                        left: {
                            ms: 100,
                            frames: [
                                [0, 1],
                                [1, 1],
                                [2, 1],
                                [3, 1],
                                [4, 1],
                            ],
                        },
                        up: {
                            ms: 100,
                            frames: [
                                [0, 3],
                                [1, 3],
                                [2, 3],
                                [3, 3],
                                [4, 3],
                            ],
                        },
                        down: {
                            ms: 100,
                            frames: [
                                [0, 0],
                                [1, 0],
                                [2, 0],
                                [3, 0],
                                [4, 0],
                            ],
                        },
                    },
                    currentAnimation: "idle",
                });

                window.projetil1 = new Enemy({
                    name: "Teste",
                    xOnMap: -10,
                    yOnMap: -25,
                    velocity: 1,
                    spriteName: "teste",
                    spriteType: "sheet",
                    lines: 4,
                    cols: 6,
                    rigid: true,
                    animations: {
                        idle: { frames: [[1, 0]] },
                    },
                    currentAnimation: "idle",
                });
            };

            game.init(
                initFunction,
                { src: "Sprites/teste.png", name: "teste" },
                { src: "Sprites/sprite_animation.png", name: "pocoes" },
                { src: "mapa/map2.png", name: "worldmap" }
            );
        </script>
    </body>
</html>
